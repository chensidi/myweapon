<!DOCTYPE html>
<html>
<head>
	<title></title>
	<style type="text/css">
		*{
			padding: 0;
			margin: 0;
			box-sizing: border-box;
		}
		ul{
			list-style: none;
			text-align: center;
			float: left;
			margin-left: calc(50% - 210px);
		}

		ul div{
			float: left;
			width: 50px;
			height: 50px;
			margin: 5px;
			line-height: 50px;
		}
		li::after,.wrap::after{
			display: block;
			content: "";
			clear: both;
		}
		button{
			cursor: pointer;
		}
	</style>
</head>
<body>
	<div style="text-align: center;">
		<h3 id="date"></h3>
		<div class="wrap">
			<ul id="ul">
				<li>
					<div>Sun</div>
					<div>Mon</div>
					<div>Tue</div>
					<div>Wen</div>
					<div>Thu</div>
					<div>Fri</div>
					<div>Sat</div>
				</li>
			</ul>
		</div>
		<button id="prev">prev</button>
		<button id="next">next</button>
	</div>
</body>
</html>
<script type="text/javascript">
	
	/*
	var run = [31,29,31,30,31,30,31,31,30,31,30,31],
		notRun = [31,28,31,30,31,30,31,31,30,31,30,31];

	var date = new Date();
	var y = date.getFullYear(),
		m = date.getMonth() + 1,
		d = date.getDate(),
		week = date.getDay();

	

	function doCalendar(m,d,week){

		monthTmp = y % 4 ? notRun[m-1] : run[m-1]

		var curSun = d - (week),
			rugSun = false,
			curSat = d + (6 - week);

		var weekArr = [];

		while(curSun > 0 || curSun+6 > 0){
			curSun+6 > monthTmp ? weekArr.unshift([curSun,monthTmp]) : weekArr.unshift([curSun,curSun+6])
			curSun -= 7;
		}

		while(curSat <= monthTmp || curSat-6 <= monthTmp){
			if(rugSun){
				curSat-6 < 1 ? weekArr.push([1,curSat]) : weekArr.push([curSat-6,curSat]);
			}

			rugSun = true;
			curSat += 7;
		}

		var weekList = [];

		for(var i = 0; i < weekArr.length; i ++){
			var list = [];
			// var poor = 7 - (weekArr[i][1] - weekArr[i][0] + 1);
			// if(i == 0){
			// 	if(poor > 0){
			// 		while(poor > 0){
			// 			list.push('x');
			// 			poor --;
			// 		}
			// 	}
			// }
			
			for(var x = weekArr[i][0]; x <= weekArr[i][1]; x ++){
				if(x < 1 || x > monthTmp){
					list.push('x');
				}else{
					list.push(x);
				}
			}
			weekList.push(list);
		}

		for(var i = 0; i < weekList.length; i ++){
			var li = document.createElement('li');
			li.className = 'day'
			for(var j = 0; j < weekList[i].length; j ++){
				var div = document.createElement('div');
				if(weekList[i][j] == 'x'){
					div.style.visibility = 'hidden'; 
				}else{
					div.innerHTML = weekList[i][j];
				}
				li.appendChild(div);
			}
			document.getElementById('ul').appendChild(li);
		}
	}
	*/

	//doCalendar(m,d,week);

	var prev = document.getElementById('prev'),
		next = document.getElementById('next');

	prev.addEventListener('click',function(){
		// if(m <= 1){
		// 	m = 12;
		// 	y -= 1;
		// 	date.setFullYear(y)
		// }else{
		// 	m = m - 1;
		// }
		// d = 1;
		// date.setMonth(m - 1);
		// date.setDate(d);
		// week = date.getDay();
		// var dayList = document.getElementsByClassName('day');
		// for(var yy = 0; yy < dayList.length; yy ++){
		// 	document.getElementById('ul').removeChild(dayList[yy])
		// 	yy --;
		// }
		// doCalendar(m,d,week);
		calendar.switch('left');
	})

	next.addEventListener('click',function(){
		// if(m >= 12){
		// 	m = 1;
		// 	y += 1;
		// 	date.setFullYear(y)
		// }else{
		// 	m = m + 1;
		// }
		// d = 1;
		// date.setMonth(m - 1);
		// date.setDate(d);
		// week = date.getDay();
		// var dayList = document.getElementsByClassName('day');
		// for(var yy = 0; yy < dayList.length; yy ++){
		// 	document.getElementById('ul').removeChild(dayList[yy])
		// 	yy --;
		// }
		// doCalendar(m,d,week);
		calendar.switch('right');
	})

	

	class Calendar{
		constructor(){
			this.run = [31,29,31,30,31,30,31,31,30,31,30,31];
			this.notRun = [31,28,31,30,31,30,31,31,30,31,30,31];
			this.date = new Date();
			this.y = this.date.getFullYear();
			this.m = this.date.getMonth() + 1;
			this.d = this.date.getDate();
			this.week = this.date.getDay();
		}

		doCalendar(m,d,week){
			var monthTmp = this.y % 4 ? this.notRun[m-1] : this.run[m-1]

			var curSun = d - (week),
				rugSun = false,
				curSat = d + (6 - week);

			var weekArr = [];

			while(curSun > 0 || curSun+6 > 0){
				curSun+6 > monthTmp ? weekArr.unshift([curSun,monthTmp]) : weekArr.unshift([curSun,curSun+6])
				curSun -= 7;
			}

			while(curSat <= monthTmp || curSat-6 <= monthTmp){
				if(rugSun){
					curSat-6 < 1 ? weekArr.push([1,curSat]) : weekArr.push([curSat-6,curSat]);
				}

				rugSun = true;
				curSat += 7;
			}

			var weekList = [];

			for(var i = 0; i < weekArr.length; i ++){
				var list = [];		
				for(var x = weekArr[i][0]; x <= weekArr[i][1]; x ++){
					if(x < 1 || x > monthTmp){
						list.push('x');
					}else{
						list.push(x);
					}
				}
				weekList.push(list);
			}

			for(var i = 0; i < weekList.length; i ++){
				var li = document.createElement('li');
				li.className = 'day'
				for(var j = 0; j < weekList[i].length; j ++){
					var div = document.createElement('div');
					if(weekList[i][j] == 'x'){
						div.style.visibility = 'hidden'; 
					}else{
						div.innerHTML = weekList[i][j];
					}
					li.appendChild(div);
				}
				document.getElementById('ul').appendChild(li);
			}

			document.getElementById('date').innerHTML = this.y + '年' + this.m + '月'
		}

		switch(dir){
			if(dir == 'left'){
				if(this.m <= 1){
					this.m = 12;
					this.y -= 1;
					this.date.setFullYear(this.y)
				}else{
					this.m = this.m - 1;
				}
			}else{
				if(this.m >= 12){
					this.m = 1;
					this.y += 1;
					this.date.setFullYear(this.y)
				}else{
					this.m = this.m + 1;
				}
			}
			this.d = 1;
			this.date.setMonth(this.m - 1);
			this.date.setDate(this.d);
			this.week = this.date.getDay();
			var dayList = document.getElementsByClassName('day');
			for(var yy = 0; yy < dayList.length; yy ++){
				document.getElementById('ul').removeChild(dayList[yy])
				yy --;
			}
			this.doCalendar(this.m,this.d,this.week);
		}
	}

	var calendar = new Calendar();
	calendar.doCalendar(calendar.m,calendar.d,calendar.week)


	
</script>